<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.aha.shardingjdbc.module.deptment.dao.SysDeptmentDao">

    <resultMap type="com.aha.shardingjdbc.module.deptment.entity.SysDeptment" id="SysDeptmentMap">
        <result property="projectId" column="project_id" jdbcType="INTEGER"/>
        <result property="tenantId" column="tenant_id" jdbcType="INTEGER"/>
        <result property="deptId" column="dept_id" jdbcType="INTEGER"/>
        <result property="groupId" column="group_id" jdbcType="INTEGER"/>
        <result property="orgGuid" column="org_guid" jdbcType="VARCHAR"/>
        <result property="pid" column="pid" jdbcType="INTEGER"/>
        <result property="deptCode" column="dept_code" jdbcType="VARCHAR"/>
        <result property="deptName" column="dept_name" jdbcType="VARCHAR"/>
        <result property="fullName" column="full_name" jdbcType="VARCHAR"/>
        <result property="shortName" column="short_name" jdbcType="VARCHAR"/>
        <result property="fullPath" column="full_path" jdbcType="VARCHAR"/>
        <result property="orderNo" column="order_no" jdbcType="INTEGER"/>
        <result property="deptFunction" column="dept_function" jdbcType="VARCHAR"/>
        <result property="deptType" column="dept_type" jdbcType="OTHER"/>
        <result property="telephone" column="telephone" jdbcType="VARCHAR"/>
        <result property="buildDate" column="build_date" jdbcType="OTHER"/>
        <result property="dataStatus" column="data_status" jdbcType="OTHER"/>
        <result property="json" column="json" jdbcType="VARCHAR"/>
        <result property="version" column="version" jdbcType="INTEGER"/>
        <result property="creator" column="creator" jdbcType="VARCHAR"/>
        <result property="createdTime" column="created_time" jdbcType="TIMESTAMP"/>
        <result property="updator" column="updator" jdbcType="VARCHAR"/>
        <result property="updatedTime" column="updated_time" jdbcType="TIMESTAMP"/>
        <result property="supervisionType" column="supervision_type" jdbcType="VARCHAR"/>
        <result property="creditCode" column="credit_code" jdbcType="VARCHAR"/>
        <result property="remark" column="remark" jdbcType="VARCHAR"/>
        <result property="areaCode" column="area_code" jdbcType="INTEGER"/>
        <result property="hexinId" column="hexin_id" jdbcType="VARCHAR"/>
        <result property="hexinParentId" column="hexin_parent_id" jdbcType="VARCHAR"/>
        <result property="dbId" column="db_id" jdbcType="INTEGER"/>
    </resultMap>

    <!--查询单个-->
    <select id="queryById" resultMap="SysDeptmentMap">
        select *
        from db.sys_deptment
        where dept_id = #{deptId} and db_id = #{deptId}%3
    </select>

    <!--查询指定行数据-->
    <select id="queryAllByLimit" resultMap="SysDeptmentMap">
        select project_id,
               tenant_id,
               dept_id,
               group_id,
               org_guid,
               pid,
               dept_code,
               dept_name,
               full_name,
               short_name,
               full_path,
               order_no,
               dept_function,
               dept_type,
               telephone,
               build_date,
               data_status,
               json,
               version,
               creator,
               created_time,
               updator,
               updated_time,
               supervision_type,
               credit_code,
               remark,
               area_code,
               hexin_id,
               hexin_parent_id,
               db_id
        from db.sys_deptment
        limit #{offset}, #{limit}
    </select>

    <!--通过实体作为筛选条件查询-->
    <select id="queryAll" resultMap="SysDeptmentMap">
        select
        project_id, tenant_id, dept_id, group_id, org_guid, pid, dept_code, dept_name, full_name, short_name, full_path,
        order_no, dept_function, dept_type, telephone, build_date, data_status, json, version, creator, created_time,
        updator, updated_time, supervision_type, credit_code, remark, area_code, hexin_id, hexin_parent_id, db_id
        from db.sys_deptment
        <where>
            <if test="projectId != null">
                and project_id = #{projectId}
            </if>
            <if test="tenantId != null">
                and tenant_id = #{tenantId}
            </if>
            <if test="deptId != null">
                and dept_id = #{deptId}
            </if>
            <if test="groupId != null">
                and group_id = #{groupId}
            </if>
            <if test="orgGuid != null and orgGuid != ''">
                and org_guid = #{orgGuid}
            </if>
            <if test="pid != null">
                and pid = #{pid}
            </if>
            <if test="deptCode != null and deptCode != ''">
                and dept_code = #{deptCode}
            </if>
            <if test="deptName != null and deptName != ''">
                and dept_name = #{deptName}
            </if>
            <if test="fullName != null and fullName != ''">
                and full_name = #{fullName}
            </if>
            <if test="shortName != null and shortName != ''">
                and short_name = #{shortName}
            </if>
            <if test="fullPath != null and fullPath != ''">
                and full_path = #{fullPath}
            </if>
            <if test="orderNo != null">
                and order_no = #{orderNo}
            </if>
            <if test="deptFunction != null and deptFunction != ''">
                and dept_function = #{deptFunction}
            </if>
            <if test="deptType != null">
                and dept_type = #{deptType}
            </if>
            <if test="telephone != null and telephone != ''">
                and telephone = #{telephone}
            </if>
            <if test="buildDate != null">
                and build_date = #{buildDate}
            </if>
            <if test="dataStatus != null">
                and data_status = #{dataStatus}
            </if>
            <if test="json != null and json != ''">
                and json = #{json}
            </if>
            <if test="version != null">
                and version = #{version}
            </if>
            <if test="creator != null and creator != ''">
                and creator = #{creator}
            </if>
            <if test="createdTime != null">
                and created_time = #{createdTime}
            </if>
            <if test="updator != null and updator != ''">
                and updator = #{updator}
            </if>
            <if test="updatedTime != null">
                and updated_time = #{updatedTime}
            </if>
            <if test="supervisionType != null and supervisionType != ''">
                and supervision_type = #{supervisionType}
            </if>
            <if test="creditCode != null and creditCode != ''">
                and credit_code = #{creditCode}
            </if>
            <if test="remark != null and remark != ''">
                and remark = #{remark}
            </if>
            <if test="areaCode != null">
                and area_code = #{areaCode}
            </if>
            <if test="hexinId != null and hexinId != ''">
                and hexin_id = #{hexinId}
            </if>
            <if test="hexinParentId != null and hexinParentId != ''">
                and hexin_parent_id = #{hexinParentId}
            </if>
            <if test="dbId != null">
                and db_id = #{dbId}
            </if>
        </where>
    </select>

    <!--新增所有列-->
    <insert id="insert" keyProperty="deptId" useGeneratedKeys="true">
        insert into db.sys_deptment(project_id, tenant_id, group_id, org_guid, pid, dept_code, dept_name, full_name,
                                       short_name, full_path, order_no, dept_function, dept_type, telephone, build_date,
                                       data_status, json, version, creator, created_time, updator, updated_time,
                                       supervision_type, credit_code, remark, area_code, hexin_id, hexin_parent_id,
                                       db_id)
        values (#{projectId}, #{tenantId}, #{groupId}, #{orgGuid}, #{pid}, #{deptCode}, #{deptName}, #{fullName},
                #{shortName}, #{fullPath}, #{orderNo}, #{deptFunction}, #{deptType}, #{telephone}, #{buildDate},
                #{dataStatus}, #{json}, #{version}, #{creator}, #{createdTime}, #{updator}, #{updatedTime},
                #{supervisionType}, #{creditCode}, #{remark}, #{areaCode}, #{hexinId}, #{hexinParentId}, #{dbId})
    </insert>

    <!--通过主键修改数据-->
    <update id="update">
        update db.sys_deptment
        <set>
            <if test="projectId != null">
                project_id = #{projectId},
            </if>
            <if test="tenantId != null">
                tenant_id = #{tenantId},
            </if>
            <if test="groupId != null">
                group_id = #{groupId},
            </if>
            <if test="orgGuid != null and orgGuid != ''">
                org_guid = #{orgGuid},
            </if>
            <if test="pid != null">
                pid = #{pid},
            </if>
            <if test="deptCode != null and deptCode != ''">
                dept_code = #{deptCode},
            </if>
            <if test="deptName != null and deptName != ''">
                dept_name = #{deptName},
            </if>
            <if test="fullName != null and fullName != ''">
                full_name = #{fullName},
            </if>
            <if test="shortName != null and shortName != ''">
                short_name = #{shortName},
            </if>
            <if test="fullPath != null and fullPath != ''">
                full_path = #{fullPath},
            </if>
            <if test="orderNo != null">
                order_no = #{orderNo},
            </if>
            <if test="deptFunction != null and deptFunction != ''">
                dept_function = #{deptFunction},
            </if>
            <if test="deptType != null">
                dept_type = #{deptType},
            </if>
            <if test="telephone != null and telephone != ''">
                telephone = #{telephone},
            </if>
            <if test="buildDate != null">
                build_date = #{buildDate},
            </if>
            <if test="dataStatus != null">
                data_status = #{dataStatus},
            </if>
            <if test="json != null and json != ''">
                json = #{json},
            </if>
            <if test="version != null">
                version = #{version},
            </if>
            <if test="creator != null and creator != ''">
                creator = #{creator},
            </if>
            <if test="createdTime != null">
                created_time = #{createdTime},
            </if>
            <if test="updator != null and updator != ''">
                updator = #{updator},
            </if>
            <if test="updatedTime != null">
                updated_time = #{updatedTime},
            </if>
            <if test="supervisionType != null and supervisionType != ''">
                supervision_type = #{supervisionType},
            </if>
            <if test="creditCode != null and creditCode != ''">
                credit_code = #{creditCode},
            </if>
            <if test="remark != null and remark != ''">
                remark = #{remark},
            </if>
            <if test="areaCode != null">
                area_code = #{areaCode},
            </if>
            <if test="hexinId != null and hexinId != ''">
                hexin_id = #{hexinId},
            </if>
            <if test="hexinParentId != null and hexinParentId != ''">
                hexin_parent_id = #{hexinParentId},
            </if>
            <if test="dbId != null">
                db_id = #{dbId},
            </if>
        </set>
        where dept_id = #{deptId}
    </update>

    <!--通过主键删除-->
    <delete id="deleteById">
        delete
        from db.sys_deptment
        where dept_id = #{deptId}
    </delete>

</mapper>